var MyApp=MyApp||{},MyApp=function(){var _doCalculations=function(val){var result="0";if(displayTempVal=$(".display-result").val(),checkInsertedValue=_validateInputs(val),checkCurrentValueOnScreen=_validateInputs(displayTempVal),checkLastDisplayChar=_validateInputs(displayTempVal.slice(-1)),checkFirstDigitInput=_validateInputs(displayTempVal.charAt(0)),errorTarget="error-message",_clearErrorMessage(errorTarget),"S"===val||"s"===val)_saveMaths(displayTempVal),result=displayTempVal;else if("C"===val||"c"===val)_clear();else if("0"===displayTempVal)"="===val?_clear():"0"===val?_clear():result="0"!==val&&checkInsertedValue.validateOperation?"-"===val?val:displayTempVal+val:val;else if("="===val)result=checkFirstDigitInput.validateNumbers?_checkMathsValidity(displayTempVal.slice(-1),val)?eval(displayTempVal):_errorMessageConsecutiveOperator(displayTempVal):checkCurrentValueOnScreen.countStringCharacters>1&&checkLastDisplayChar.validateNumbers?eval(displayTempVal):_errorMessageConsecutiveOperator(displayTempVal);else if(checkFirstDigitInput.validateNumbers)result=checkCurrentValueOnScreen.countStringCharacters>1?_checkConsecutiveOperators(displayTempVal,val):displayTempVal+val;else if("-"===displayTempVal.charAt(0))result=_checkConsecutiveOperators(displayTempVal,val);else if("Infinity"===displayTempVal||"NaN"===displayTempVal)result=val;else{var errorMessage="Input should start with a number";_validationError(errorMessage),result="0"}_display(result)},_display=function(a){$(".display-result").val(a)},_clear=function(){$(".display-result").val("0")},_checkConsecutiveOperators=function(a,b){var c="";return c=_checkMathsValidity(a.slice(-1),b)?a+b:_errorMessageConsecutiveOperator(a)},_errorMessageConsecutiveOperator=function(a){var b=a,c="Double operators use not valid";return _validationError(c),b},_validationError=function(a){$(".error-message").html(a).fadeIn()},_clearErrorMessage=function(a){$("."+a+":empty").length||$("."+a).empty().hide()},_errorMessageModalWindow=function(a){$(".modal-message").html(a).fadeIn(),$(".modal-get-maths").val("")},_checkMathsValidity=function(a,b){var c=_validateInputs(a),d=_validateInputs(b);return c.validateNumbers===!0&&d.validateNumbers===!0||(c.validateNumbers===!0&&d.validateOperation===!0||(c.validateOperation===!0&&1==d.validateNumbers||void 0))},_submitMaths=function(a){var b=$(".modal-get-maths").val(),c=$(".display-result").val(),d=$(".saved-maths-box__list"),e=_validateInputs(b);if(e.countStringCharacters<25)if(e.validateInputNoSpecialChars)$(".saved-maths-box h2").hide(),d.prepend("<li><span class='view-maths'>"+b+" -- "+_getCurrentDate()+"</span><span class='delete-maths'>DELETE</span><span class='result-maths'>"+c+"</span></li>"),$("#myModal").fadeOut().removeClass("open"),$(".calculator-panel__digits").focus();else{var f="Only alphanumerics and space are allowed";_errorMessageModalWindow(f)}else{var f="Maximum 25 characters allowed";_errorMessageModalWindow(f)}},_saveMaths=function(a){var b=($(".saved-maths-box__list"),"modal-message");$(".modal-get-maths").val(""),_clearErrorMessage(b),$("#myModal").fadeIn("slow",function(){$("#myModal").addClass("open"),$(".modal-get-maths").focus()})},_loadMaths=function(a){var b=a.siblings(".result-maths").text();$(".display-result").val(b)},_deleteMaths=function(a){a.closest("li").remove(),0===$(".saved-maths-box__list li").length&&$(".saved-maths-box h2").show()},_getCurrentDate=function(){var a=new Date,b=a.getDate()+"/"+(a.getMonth()+1)+"/"+a.getFullYear()+" @ "+a.getHours()+":"+a.getMinutes()+":"+a.getSeconds();return b},_validateInputs=function(a){var b=/^[0-9SsCc \/+*.=-]+$/,c=/^[0-9SsCc\/+*.=-]+$/,d=/^[\/+*.=-]+$/,e=/^[0-9]+$/,f=/^[a-zA-Z0-9 ]+$/;return{validateInput:b.test(a),validateInputNoSpaceAllowed:c.test(a),validateOperation:d.test(a),validateNumbers:e.test(a),validateInputNoSpecialChars:f.test(a),countStringCharacters:a.length}},checkKeyCodeValidity=function(a){var b="";return b=null===a.which?a.keyCode:a.keyCode?a.keyCode:a.which},CalculatorListener=function(){$(".calculator-panel__digits").focus(),$(".calculator-panel__digits").bind("keypress",function(a){var b="",c="",d="=";if(b=checkKeyCodeValidity(a),c=_validateInputs(String.fromCharCode(b)),!$(".modal").hasClass("open"))if(c.validateInputNoSpaceAllowed)_doCalculations(String.fromCharCode(b));else if(13!==b||$(".modal").hasClass("open")){var e="Neither characters nor space allowed";_validationError(e)}else _doCalculations(d)}),$("#myModal").bind("keypress",function(a){var b="";b=checkKeyCodeValidity(a),13===b&&(a.preventDefault(),$(".button-submit").click())}),$(".calculator-panel__digits button").click(function(a){a.preventDefault(),_doCalculations(this.value),$(".calculator-panel__digits").focus()}),$(".saved-maths-box__list").on("click",".view-maths",function(a){a.preventDefault(),_loadMaths($(this))}),$(".saved-maths-box__list").on("click",".delete-maths",function(a){a.preventDefault(),_deleteMaths($(this))}),$(".button-submit").click(function(a){a.preventDefault(),_submitMaths($(this))}),$(".button-cancel, .modal-close").click(function(a){a.preventDefault(),$("#myModal").fadeOut().removeClass("open"),$(".calculator-panel__digits").focus()}),$(document).on("click","#myModal",function(a){a.preventDefault(),a.target===this&&$("#myModal").fadeOut().removeClass("open")})};return{CalculatorListener:CalculatorListener}}();MyApp.CalculatorListener();